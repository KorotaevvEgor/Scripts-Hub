# Диаграмма архитектуры проекта

```
┌─────────────────────────────────────────────────────────────────┐
│                        PRESENTATION LAYER                      │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐ │
│  │   Web Browser   │  │   Mobile App    │  │   API Client    │ │
│  │   (Frontend)    │  │   (Future)      │  │   (Future)      │ │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      WEB FRAMEWORK LAYER                       │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    Django Framework                        │ │
│  │  ┌───────────────┐ ┌───────────────┐ ┌───────────────────┐ │ │
│  │  │   Templates   │ │     Views     │ │   URL Routing     │ │ │
│  │  │  (HTML+CSS)   │ │  (Business    │ │   (urls.py)       │ │ │
│  │  │               │ │   Logic)      │ │                   │ │ │
│  │  └───────────────┘ └───────────────┘ └───────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      APPLICATION LAYER                         │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    Django Applications                      │ │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────────────────┐ │ │
│  │  │   Scripts   │ │    Auth     │ │       Admin             │ │ │
│  │  │     App     │ │    App      │ │        App              │ │ │
│  │  │             │ │             │ │                         │ │ │
│  │  │  • Models   │ │ • Users     │ │ • Admin Interface       │ │ │
│  │  │  • Views    │ │ • Groups    │ │ • User Management       │ │ │
│  │  │  • Forms    │ │ • Perms     │ │ • Data Visualization    │ │ │
│  │  └─────────────┘ └─────────────┘ └─────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                        SERVICE LAYER                           │
│  ┌──────────────────┐ ┌──────────────────┐ ┌─────────────────┐ │
│  │   Vacancy        │ │    Export        │ │    Access       │ │
│  │   Parser         │ │    Service       │ │   Control       │ │
│  │                  │ │                  │ │   Service       │ │
│  │ • HH.ru API      │ │ • Excel Export   │ │ • User Roles    │ │
│  │ • Data Parsing   │ │ • PDF Export     │ │ • Permissions   │ │
│  │ • Validation     │ │ • CSV Export     │ │ • Authorization │ │
│  └──────────────────┘ └──────────────────┘ └─────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                       DATA ACCESS LAYER                        │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                    Django ORM                              │ │
│  │  ┌───────────────┐ ┌───────────────┐ ┌───────────────────┐ │ │
│  │  │    Models     │ │   QuerySets   │ │    Managers       │ │ │
│  │  │               │ │               │ │                   │ │ │
│  │  │ • Script      │ │ • Filtering   │ │ • Custom Queries  │ │ │
│  │  │ • ScriptRun   │ │ • Joins       │ │ • Business Logic  │ │ │
│  │  │ • Vacancy     │ │ • Pagination  │ │ • Validation      │ │ │
│  │  │ • VacancyRun  │ │ • Ordering    │ │                   │ │ │
│  │  │ • User        │ │               │ │                   │ │ │
│  │  └───────────────┘ └───────────────┘ └───────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                       DATABASE LAYER                           │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                      SQLite Database                       │ │
│  │  ┌──────────────┐ ┌──────────────┐ ┌───────────────────────┐ │ │
│  │  │   Scripts    │ │  Script Runs │ │      Vacancies        │ │ │
│  │  │   Table      │ │    Table     │ │       Table           │ │ │
│  │  │              │ │              │ │                       │ │ │
│  │  │ • id         │ │ • id         │ │ • id                  │ │ │
│  │  │ • name       │ │ • script_id  │ │ • script_id           │ │ │
│  │  │ • query      │ │ • started_by │ │ • title               │ │ │
│  │  │ • created_by │ │ • status     │ │ • company             │ │ │
│  │  │ • is_active  │ │ • started_at │ │ • salary              │ │ │
│  │  └──────────────┘ └──────────────┘ └───────────────────────┘ │ │
│  │                                                              │ │
│  │  ┌──────────────┐ ┌──────────────┐ ┌───────────────────────┐ │ │
│  │  │    Users     │ │  User-Script │ │    Vacancy Runs       │ │ │
│  │  │    Table     │ │  Permissions │ │      Table            │ │ │
│  │  │              │ │    Table     │ │                       │ │ │
│  │  │ • id         │ │ • user_id    │ │ • id                  │ │ │
│  │  │ • username   │ │ • script_id  │ │ • script_run_id       │ │ │
│  │  │ • email      │ │              │ │ • vacancy_id          │ │ │
│  │  │ • is_staff   │ │              │ │ • is_new_in_run       │ │ │
│  │  └──────────────┘ └──────────────┘ └───────────────────────┘ │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        EXTERNAL APIS                           │
│  ┌──────────────────┐ ┌──────────────────┐ ┌─────────────────┐ │
│  │   HeadHunter     │ │     Future       │ │     Future      │ │
│  │     API          │ │   SuperJob API   │ │   Habr API      │ │
│  │                  │ │                  │ │                 │ │
│  │ • GET vacancies  │ │ • GET vacancies  │ │ • GET jobs      │ │
│  │ • Rate limiting  │ │ • Different      │ │ • Tech focus    │ │
│  │ • JSON response  │ │   structure      │ │ • Filtering     │ │
│  └──────────────────┘ └──────────────────┘ └─────────────────┘ │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                    TECHNOLOGY COMPONENTS                       │
│  ┌──────────────────┐ ┌──────────────────┐ ┌─────────────────┐ │
│  │   Python 3.12    │ │   JavaScript     │ │    HTML/CSS     │ │
│  │                  │ │   (jQuery)       │ │   (Bootstrap)   │ │
│  │ • Django 5.2.5   │ │                  │ │                 │ │
│  │ • DRF 3.16.1     │ │ • AJAX requests  │ │ • Responsive    │ │
│  │ • Requests       │ │ • DOM manip      │ │ • Modern UI     │ │
│  │ • Pandas         │ │ • Event handling │ │ • Font Awesome  │ │
│  │ • OpenPyXL       │ │                  │ │                 │ │
│  └──────────────────┘ └──────────────────┘ └─────────────────┘ │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      DEPLOYMENT STACK                          │
│  ┌──────────────────┐ ┌──────────────────┐ ┌─────────────────┐ │
│  │  Ubuntu Linux    │ │   Python venv    │ │   File System   │ │
│  │                  │ │                  │ │                 │ │
│  │ • Server OS      │ │ • Isolation      │ │ • Static files  │ │
│  │ • Process mgmt   │ │ • Dependencies   │ │ • Media files   │ │
│  │ • Security       │ │ • Version ctrl   │ │ • Database file │ │
│  └──────────────────┘ └──────────────────┘ └─────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

## Основные потоки данных:

### 1. Пользовательский запрос (User Request Flow):
```
Browser → Django URLs → Views → Templates → Response
```

### 2. Парсинг вакансий (Vacancy Parsing Flow):
```
User Action → View → Parser Service → HH.ru API → Data Processing → Database
```

### 3. Экспорт данных (Data Export Flow):
```
User Request → Export View → Database Query → Excel Generation → File Download
```

### 4. Управление доступом (Access Control Flow):
```
User Login → Authentication → Authorization Check → Resource Access
```

## Ключевые архитектурные принципы:

1. **Separation of Concerns** - Четкое разделение ответственности между слоями
2. **Model-View-Template** - Архитектурный паттерн Django
3. **DRY (Don't Repeat Yourself)** - Переиспользование кода
4. **Security by Design** - Встроенная безопасность на всех уровнях
5. **Scalability** - Возможность горизонтального и вертикального масштабирования
